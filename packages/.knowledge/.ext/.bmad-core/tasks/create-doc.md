<!-- Powered by BMAD™ Core -->

# 用模板创建文档（YAML 驱动）

## ⚠️ 重要提醒 ⚠️

**这是个可执行的工作流程，不是参考文档**

用这个任务时：

1. **别想着偷懒** - 这个流程必须和用户互动
2. **必须一步步来** - 每个部分都要按顺序处理，需要用户反馈
3. **需要引导用户** - 当 `elicit: true` 时，必须用 1-9 格式等用户回应
4. **不能走捷径** - 不按这个流程来就创建不了完整文档

**违规警告：** 如果没和用户互动就创建完整文档，那就是违规了。

## 重要：找模板

如果没给 YAML 模板，就把 `.bmad-core/templates` 里的所有模板列出来，或者让用户再提供一个。

## 重要：必须用引导格式

**当 `elicit: true` 时，必须停下来等用户：**

**你必须这样做：**

1. 把内容展示出来
2. 说明理由（解释为什么这么选、做了哪些假设、怎么决定的）
3. **停下来，给出 1-9 选项：**
   - **选项 1：** 总是"继续下一部分"
   - **选项 2-9：** 从 data/elicitation-methods 里选 8 种方法
   - 最后写"选择 1-9 或直接输入你的问题/反馈："
4. **等用户回应** - 用户没选选项或给反馈就别继续

**违规警告：** 如果 elicit=true 的部分没和用户互动就创建内容，那就是违规。

**千万别问是/否问题，也别用其他格式。**

## 处理步骤

1. **解析 YAML 模板** - 把模板的元数据和各个部分加载进来
2. **设置偏好** - 显示当前模式（交互式），确认输出文件
3. **处理每个部分：**
   - 条件不满足就跳过
   - 检查代理权限（谁拥有/谁可以编辑）- 注意这个部分是不是只给特定代理用
   - 按部分指令来写内容
   - 展示内容 + 详细理由
   - **如果 elicit: true** → 必须用 1-9 选项格式
   - 能保存到文件就保存
4. **一直做到完成为止**

## 理由说明要求

展示部分内容时，一定要说明：

- 为什么这么选（选了哪个，没选哪个，为什么）
- 写的时候做了哪些假设
- 有什么需要用户注意的决策
- 哪些地方可能需要验证

## 引导结果处理

用户选了引导方法（2-9）后：

1. 从 data/elicitation-methods 执行方法
2. 把结果和洞察展示出来
3. 给用户选项：
   - **1. 应用更改并更新部分**
   - **2. 返回引导菜单**
   - **3. 提问题或继续参与引导**

## 代理权限

处理有代理权限字段的部分时：

- **owner**：注意哪个代理角色最初创建/填充这个部分
- **editors**：列出可以修改这个部分的代理角色
- **readonly**：标记创建后不能修改的部分

**对于有访问限制的部分：**

- 在生成的文档里加上说明负责代理的注释
- 比如："_（这个部分由 dev-agent 拥有，只能由 dev-agent 修改）_"

## YOLO 模式

用户输入 `#yolo` 就能切换到 YOLO 模式（一次性处理所有部分）。

## 重要提醒

**❌ 千万别：**

- 引导时问是/否问题
- 用除了 1-9 编号选项之外的任何格式
- 创建新的引导方法

**✅ 一定要：**

- elicit: true 时用精确的 1-9 格式
- 只从 data/elicitation-methods 里选选项 2-9
- 提供解释决策的详细理由
- 最后写"选择 1-9 或直接输入你的问题/反馈："
